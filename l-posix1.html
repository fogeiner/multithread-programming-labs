<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>POSIX threads explained</title>
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))'/>
<link rel="schema.DC" href="http://purl.org/DC/elements/1.0/"/>
<link rel="SHORTCUT ICON" href="http://www.ibm.com/favicon.ico"/>
<meta name="Owner" content="developerWorks Content/Raleigh/IBM"/>
<meta name="DC.Language" scheme="rfc1766" content="en"/>
<meta name="IBM.Country" content="ZZ"/>
<meta name="Security" content="Public"/>
<meta name="IBM.SpecialPurpose" content="SP001"/>
<meta name="IBM.PageAttributes" content="sid=1003"/>
<meta name="Source" content="v16 Template Generator"/>
<meta name="Robots" content="index,follow"/>
<meta name="Abstract" content="POSIX (Portable Operating System Interface) threads are a great way to increase the responsiveness and performance of your code. In this series, Daniel Robbins shows you exactly how to use threads in your code. A lot of behind-the-scenes details are covered, so by the end of this series you'll really be ready to create your own multithreaded programs."/>
<meta name="Description" content="POSIX (Portable Operating System Interface) threads are a great way to increase the responsiveness and performance of your code. In this series, Daniel Robbins shows you exactly how to use threads in your code. A lot of behind-the-scenes details are covered, so by the end of this series you'll really be ready to create your own multithreaded programs."/>
<meta name="Keywords" content="Linux, operating systems, Linux news, open source, Linux papers, Linux information, Linux articles, Linux whitepapers, IBM, POSIX, posix, POSIX threads, posix threads, tttlca"/>
<meta name="DC.Date" scheme="iso8601" content="2000-07-01"/>
<meta name="DC.Type" scheme="IBM_ContentClassTaxonomy" content="CT316"/>
<meta name="DC.Subject" scheme="IBM_SubjectTaxonomy" content="SWGC0"/>
<meta scheme="IBM_WTMCategory" name="IBM.WTMCategory" content="SOFDCLNXZZ" />
<meta name="DC.Rights" content="© Copyright IBM Corporation 2000"/>
<meta name="IBM.Effective" scheme="W3CDTF" content="2000-07-01"/>
<meta name="title" content="POSIX threads explained"/>

<!-- HEADER_SCRIPTS_AND_CSS_INCLUDE -->
<link href="//dw1.s81c.com/common/v16/css/all.css" media="all" rel="stylesheet" title="www" type="text/css"/>
<link href="//dw1.s81c.com/common/v16/css/screen.css" media="screen,projection" rel="stylesheet" title="www" type="text/css"/>
<link href="//dw1.s81c.com/common/v16/css/screen-uas.css" media="screen,projection" rel="stylesheet" title="www" type="text/css"/>
<link href="//dw1.s81c.com/common/v16/css/zz/en/screen-fonts.css" media="screen,projection" rel="stylesheet" title="www" type="text/css"/>
<link href="//dw1.s81c.com/common/v16/css/handheld.css" media="handheld" rel="stylesheet" title="www" type="text/css"/>
<link href="//dw1.s81c.com/common/v16/css/print.css" media="print" rel="stylesheet" title="www" type="text/css"/>
<link href="//dw1.s81c.com/common/v16/css/overlay.css" media="screen,projection" rel="stylesheet" title="www" type="text/css"/>

<!-- dW-specific CSS -->
<link href="//dw1.s81c.com/developerworks/css/dw-screen.css" media="screen,projection" rel="stylesheet" title="www" type="text/css"/>
<link href="//dw1.s81c.com/developerworks/js/jquery/cluetip98/jquery.cluetip.css" media="screen,projection" rel="stylesheet"  title="www" type="text/css" />

<script src="//dw1.s81c.com/common/js/ibmcommon.js" type="text/javascript">//</script>
<script src="//dw1.s81c.com/common/js/dynamicnav.js" type="text/javascript">//</script>

<!-- dW functional JS -->
<script language="JavaScript" src="//dw1.s81c.com/developerworks/js/urltactic.js" type="text/javascript"></script>
<!-- Rating_START -->
<script language="JavaScript" src="//dw1.s81c.com/developerworks/js/artrating/artrating.js" type="text/javascript"></script>
<style type="text/css">
.metavalue {
  display: none;
}
</style>
<!-- Rating_END --><!-- RESERVED_HEADER_INCLUDE -->
<script language="javascript" src="//dw1.s81c.com/developerworks/js/ajax1.js" type="text/javascript"></script>
<script language="javascript" src="//dw1.s81c.com/developerworks/js/search_counter-maverick.js" type="text/javascript"></script>
<script language="javascript" src="//dw1.s81c.com/developerworks/js/request_referer_capture-maverick.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
 <!--
 setDefaultQuery('');
 //-->
</script>
<script language="JavaScript" type="text/javascript">
 <!--
 function openNewWindow(url,tar,arg){window.open(url,tar,arg);}
 //-->
</script>
<!-- Include file support -->
<script language="JavaScript" type="text/javascript">
(function($) {
	jQuery.extend({
		getInc: function(u,d){
			if(u==null)return;
			jQuery.ajax({
	    		type: "GET",
			url: u,
			dataType: "text",
	        	success: function(t) {
				jQuery(d).html(t);
				ibmCommon.initShowHide(jQuery(d).children()[0]);			
			},
			async: true
			});
		}
	});
})(jQuery);
</script>
</head>

<body id="ibm-com">
<div id="ibm-top" class="ibm-landing-page">

<!-- MASTHEAD_BEGIN -->
<div class="ibm-access"><a href="#ibm-content">Skip to main content</a></div>
<div id="ibm-masthead">
<div id="ibm-logo"><a href="http://www.ibm.com/"><img height="50" src="//dw1.s81c.com/i/v16/t/ibm-logo.gif" width="110" alt="IBM®" /></a></div>
<ul id="ibm-geo"><li id="ibm-country" class="ibm-first">Country/region</li><li id="ibm-change-country">[ <a href="http://www.ibm.com/developerworks/country/">select</a> ]</li></ul>
  <form id="ibm-search-form" action="//www.ibm.com/developerworks/search/searchResults.jsp" method="get" name="form1"><input type="hidden" name="searchType" value="1"/><input type="hidden" name="searchSite" value="dW"/><p>
<span id="ibm-search-scope">
<label for="sn"><img src="//dw1.s81c.com/i/c.gif" width="1" height="1" alt="Search in:"/></label>
<select name="searchScope" id="sn">
<option value="dW" selected="selected">All of dW</option>
<option value="dW">-----------------</option>
<option value="aixunix">&nbsp;AIX and UNIX</option>
<option value="db2">&nbsp;Information Mgmt</option>
<option value="lotus">&nbsp;Lotus</option>
<option value="rdd">&nbsp;Rational</option>
<option value="tivoli">&nbsp;Tivoli</option>  
<option value="WSDD">&nbsp;WebSphere</option>
<option value="dW">-----------------</option> 
<option value="javaZ">&nbsp;Java technology</option> 
<option value="linuxZ">&nbsp;Linux</option> 
<option value="opensrcZ">&nbsp;Open source</option>
<option value="webservZ">&nbsp;SOA/Web services</option>
<option value="webarchZ">&nbsp;Web development</option>  
<option value="xmlZ">&nbsp;XML</option>
<option value="dW">-----------------</option>
<option value="forums">&nbsp;dW forums</option> 
<option value="dW">-----------------</option>
<option value="aI">University</option>
<option value="dW">-----------------</option>
<option value="aW">alphaWorks</option>
<option value="dW">-----------------</option>
<option value="all">All of IBM</option>
</select>
</span>

<label for="q"><img alt="Search for:" height="1" width="1" src="//dw1.s81c.com/i/c.gif" /></label><input type="text" name="query" maxlength="100" id="q"/><input type="submit" id="ibm-search" class="ibm-btn-search" name="Search" value="Search" /></p></form>
<div id="ibm-site-name">
<!-- IBM site name container -->
</div>
<div id="ibm-universal-nav">
<ul><li id="ibm-unav-home" class="ibm-first"><a href="http://www.ibm.com/">Home</a></li><li id="ibm-unav-solutions"><a href="http://www.ibm.com/solutions/">Solutions</a></li><li id="ibm-unav-services"><a href="http://www.ibm.com/technologyservices/">Services</a></li><li id="ibm-unav-products"><a href="http://www.ibm.com/products/">Products</a></li><li id="ibm-unav-support"><a href="http://www.ibm.com/support/">Support &amp; downloads</a></li><li id="ibm-unav-myibm"><a href="http://www.ibm.com/account/">My IBM</a></li></ul>
</div>
</div>
<!-- MASTHEAD_END -->

<div id="ibm-pcon">

<!-- CONTENT_BEGIN -->
<div id="ibm-content">

<!-- Navigation_Trail_BEGIN -->
<!-- &nbsp; -->
      <div id="ibm-content-head"><ul id="ibm-navigation-trail"><li class="ibm-first"><a href="http://www.ibm.com/developerworks/">developerWorks</a></li><li><a href="http://www.ibm.com/developerworks/linux/">Linux</a></li><li><a href="http://www.ibm.com/developerworks/views/linux/library.jsp">Technical library</a></li></ul></div>
<!-- Navigation_Trail_END -->

<!-- dW_Summary Area_START -->
<div id="dw-summary-article">

<div class="dw-content-head">
<h1>POSIX threads explained</h1><p><em>A simple and nimble tool for memory sharing</em></p>
</div>

<div class="ibm-container-body ibm-two-column">

<div class="ibm-column ibm-first">
<div class="author"><a class="dwauthor" rel="#authortip1" href="#author1">Daniel Robbins</a> (<a href="mailto:drobbins@gentoo.org?subject=POSIX threads explained">drobbins@gentoo.org</a>), President/CEO, Gentoo Technologies, Inc</div><div id="authortip1" class="dwauthor-onload-state ibm-no-print">Daniel Robbins lives in Albuquerque, New Mexico. He is the President/CEO of Gentoo Technologies, Inc., the Chief Architect of the Gentoo Project and a contributing author to several books published by MacMillan: <i>Caldera OpenLinux Unleashed</i>, <i>SuSE Linux Unleashed</i>, and <i>Samba  Unleashed</i>.  Daniel has been involved with computers in some fashion since the second grade, when he was first exposed to the Logo Programming language as well as a potentially dangerous dose of Pac-Man.  This probably explains why he has since served as a Lead
Graphic Artist at SONY Electronic Publishing/Psygnosis. Daniel enjoys spending time with his wife Mary, and his new baby daughter Hadassah. You can contact Daniel Robbins at <a href="mailto:drobbins@gentoo.org">drobbins@gentoo.org</a>.</div>
<p></p>
<p><b>Summary:</b>&nbsp; POSIX (Portable Operating System Interface) threads are a great way to increase the responsiveness and performance of your code.  In this series, Daniel Robbins shows you exactly how to use threads in your code.  A lot of behind-the-scenes details are covered, so by the end of this series you'll really be ready to create your own multithreaded programs.</p>

<div id="dw-tag-content" class="ibm-no-print"></div><div id="dw-moretags-access" class="ibm-access"></div>
<p class="ibm-no-print"><div id="dw-tag-this" class="ibm-no-print"><a class="ibm-external-link" onclick="jQuery.launchTagThisWindow(); return false;" href="#">Tag this!</a></div><div id="interestShow" class="ibm-no-print"></div></p>
</div>

<div class="ibm-column ibm-second">
<p class="leading"><b>Date:</b>&nbsp; 01 Jul  2000
<br /><b>Level: </b>&nbsp;Advanced

<br /><b>Also available in:&nbsp;</b>



&nbsp;<a href="http://www.ibm.com/developerworks/jp/linux/library/l-posix1/">Japanese</a> 



<br />
<br /><b>Activity:</b>&nbsp; 43756 views
<br /><b>Comments:</b> &nbsp; <span id="nCmts"><img alt="" src="//dw1.s81c.com/developerworks/i/circle-preloader.gif" height="12" width="50" /><img alt="" src="//dw1.s81c.com/i/c.gif" height="14" width="1" /></span>
<!-- Rating_Area_Begin -->
<!-- Ensure that div id is based on input id and ends with -widget -->	
<input id="art-rating" name="ratinga" type="hidden" value="0"/><div id="art-rating-widget"></div>
<script language="JavaScript" type="text/javascript">
// <![CDATA[
   // widget div id and article id as args
   window.artRating.init('art-rating-widget');
// ]]>
</script>
<!-- Rating_Area_End -->
</p>
</div>

</div>
</div>
<!-- dW_Summary_Area_END -->

<!-- CONTENT_BODY -->
<div id="ibm-content-body">

<!-- MAIN_COLUMN_BEGIN -->
<div id="ibm-content-main">

<!-- Related_Searches_Area -->
<!-- Related_Searches_Area_Begin -->
<script type="text/javascript" language="javascript">
	     capture_referrer();
</script>

<div id="dw-related-searches-article" style="display:none">
<div class="ibm-container ibm-alternate-two">
<div class="ibm-container-body">

<!--  START : HTML FOR ARTICLE SEARCH -->
  <div id="article_results" style="display:block"></div>
<!--  END : HTML FOR ARTICLE SEARCH -->

</div>
</div>
</div>
<!-- Related_Searches_Area_End -->
<!-- MAIN_COLUMN_CONTAINER_BEGIN -->
<div class="ibm-container">

<!-- MAIN_COLUMN_CONTENT_BEGIN -->
<p><a name="h0"><span class="atitle">Threads are fun</span></a></p><p>

Knowing how to properly use threads should be
part of every good programmer's repertoire. Threads are similar to processes.  Threads, like processes,
are time-sliced by the kernel.  On uniprocessor systems the
kernel uses time slicing to simulate simultaneous execution of
threads in much the same way it uses time slicing with processes.  And, on
multiprocessor systems, threads are actually able to run
simultaneously, just like two or more processes can.</p><p>So why is multithreading preferable to multiple independent processes for
most cooperative tasks?  Well, threads share
the same memory space. Independent threads can access the same variables in
memory.  So all of your program's threads can read or write the declared global integers.  If you've ever programmed any
non-trivial code that uses fork(), you'll recognize the importance of this tool.  Why?  While fork() allows you to create multiple processes, it
also creates the following communication problem: how to get multiple
processes, each with their own independent memory space, to
communicate. There is no one simple answer to this problem. While there are many different kinds of local IPC (inter-process
communication), they all suffer from two important drawbacks:</p><ul><li>They impose some form of additional kernel overhead, lowering
performance.</li><li>In almost all situations, IPC is not a "natural" extension
of your code.  It often dramatically increases the complexity
of your program.</li></ul><p>Double bummer: overhead and complication aren't good things.  If
you've ever had to make massive modifications to one of your programs
so that it supports IPC, you'll really appreciate the simple
memory-sharing approach that threads provide. POSIX threads don't need
to make expensive and complicated long-distance calls because all
our threads happen to live in the same house.  With a little
synchronization, all your threads can read and modify your program's
existing data structures.  You don't have to pump the data through a
file descriptor or squeeze it into a tight, shared memory space.  For this reason alone you should consider
the one process/multithread model rather than the
multiprocess/single-thread model.</p><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">Back to top</a></p><p><a name="h1"><span class="atitle">Threads are nimble</span></a></p><p>

But there's more.  Threads also happen to be extremely nimble.
Compared to a standard fork(), they carry a lot less overhead. The
kernel does not need to make a new independent copy of the process memory
space, file descriptors, etc.  That saves a lot of CPU time, making
thread creation ten to a hundred times faster than new
process creation.  Because of this, you can use a whole bunch of
threads and not worry too much about the CPU and memory overhead
incurred.  You don't have a big CPU hit the way you do with fork().  This means
you can generally create threads whenever it makes sense in your program.</p><p>Of course, just like processes, threads will take advantage of
multiple CPUs.  This is a really great feature if your software is designed to be used on a multiprocessor machine (if the software is open source, it will
probably end up running on quite a few of these).  The performance of
certain kinds of threaded programs (CPU-intensive ones in particular)
will scale almost linearly with the number of processors in the
system.  If you're writing a program that is very CPU-intensive,
you'll definitely want to find ways to use multiple threads in your
code.  Once you're adept at writing threaded code, you'll
also be able to approach coding challenges in new and creative ways
without a lot of IPC red tape and miscellaneous mumbo-jumbo.
All these benefits work synergistically to make multithreaded
programming fun, fast, and flexible.</p><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">Back to top</a></p><p><a name="h2"><span class="atitle">I think I'm a clone now</span></a></p><p>

If you've been in the Linux programming world for a while, you may
know about the __clone() system call.  __clone() is similar to fork(), but allows you to do lots of things that threads can do. For example, with
__clone() you can selectively share parts of your parent's
execution context (memory space, file descriptors, etc.) with a new
child process.  That's a good thing.  But there is also a not-so-good
thing about __clone().  As the __clone() man page states:</p><blockquote>
"The __clone call is Linux-specific and should not be used in programs intended to be  portable. For programming threaded applications (multiple threads of control in the same memory space), it is better to use a library implementing the POSIX 1003.1c thread API, such as the Linux-Threads library. See pthread_create(3thr)."
</blockquote><p>So, while __clone() offers many of the benefits of threads, it is not
portable.  That doesn't mean you shouldn't use it in your code. But
you should weigh this fact when you are considering using __clone() in
your software.  Fortunately, as the __clone() man page states, there's
a better alternative: POSIX threads.  When you want to write
<b>portable</b> multithreaded code, code that works under Solaris, FreeBSD,
Linux, and more, POSIX threads are the way to go.</p><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">Back to top</a></p><p><a name="h3"><span class="atitle">Beginning threads</span></a></p><p>

Here's a simple example program that uses POSIX threads:</p><br /><a name="listing1"><b>thread1.c</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

#include &lt;pthread.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;

void *thread_function(void *arg) {
  int i;
  for ( i=0; i&lt;20; i++ ) {
    printf("Thread says hi!\n");
    sleep(1);
  }
  return NULL;
}

int main(void) {

  pthread_t mythread;
  
  if ( pthread_create( &amp;mythread, NULL, thread_function, NULL) ) {
    printf("error creating thread.");
    abort();
  }

  if ( pthread_join ( mythread, NULL ) ) {
    printf("error joining thread.");
    abort();
  }

  exit(0);

}
</pre></td></tr></table><br /><p>To compile this program, simply save this program as thread1.c, and
type:</p><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">
$ gcc thread1.c -o thread1 -lpthread
</pre></td></tr></table><br /><p>
Run it by typing:
</p><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">
$ ./thread1
</pre></td></tr></table><br /><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">Back to top</a></p><p><a name="h4"><span class="atitle">Understanding thread1.c</span></a></p><p>

thread1.c is an extremely simple threaded program.  While it doesn't
do anything useful, it'll help you understand how threads work.  Let's
take a step-by-step look at what this program does.  In main() we first
declare a variable called mythread, which has a type of pthread_t. The
pthread_t type, defined in pthread.h, is often called a "thread id"
(commonly abbreviated as "tid").  Think of it as a kind of thread
handle.</p><p>After mythread is declared (remember that mythread is just a "tid", or a
handle to the thread we are about to create), we call the
pthread_create function to create a real, living thread.  Don't be
confused by the fact that pthread_create() is inside an "if"
statement. Since pthread_create() returns zero on success and a
non-zero value on failure, placing the function call in an if() is
just an elegant way of detecting a failed pthread_create() call.
Let's look at the arguments to pthread_create.  The first one is a
pointer to mythread, &amp;mythread.  The second argument, currently set to
NULL, can be used to define certain attributes for our thread.
Because the default thread attributes work for us, we simply set it to
NULL.</p><p>Our third argument is the name of a function that the new thread will
execute when it starts. In this case the name of the function is thread_function().  When this
thread_function() returns, our new thread will terminate.  In this
example our thread function doesn't do anything remarkable. It just
prints out "Thread says hi!" 20 times and then exits.  Notice that
thread_function() accepts a void * as an argument and also returns a
void * as a return value.  This shows us that it's possible to use a
void * to pass an arbitrary piece of data to our new thread, and that
our new thread can return an arbitrary piece of data when it finishes.
Now, how do we pass our thread an arbitrary argument?  Easy. We use
the fourth argument to the pthread_create() call.  In this example, we
set it to NULL because we don't need to pass any data into our
trivial thread_function().</p><p>As you may have guessed, the program will consist of two threads after pthread_create() successfully returns.  Wait a minute, <b>two</b>
threads?  Didn't we just create a single thread?  Yes, we did. But our main program is also considered a thread.  Think of it this
way: if you write a program and don't use POSIX threads at all, the program
will be single-threaded (this single thread is called the "main"
thread).  By creating a new thread we now have a total of two threads
in our program.</p><p>I imagine you have at least two important questions at this point.
The first is what the main thread does after the new thread
is created. It keeps on going and executes the next line of
our program in sequence (in this case that line is "if (
pthread_join(...))").  The second question you may be wondering about is what happens to our new
thread when it exits. It stops and waits to be merged or
"joined" with another thread as part of its cleanup process.</p><p>OK, now on to pthread_join().  Just as pthread_create() split our
single thread into two threads, pthread_join() merges two threads into
a single thread.  The first argument to pthread_join() is our tid
mythread.  The second argument is a pointer to a void pointer. If the void pointer is
non-NULL, pthread_join will place our thread's void * return value at
the location we specify.  Since we don't care about
thread_function()'s return value, we set it to NULL.</p><p>You'll notice that our thread_function() takes 20 seconds to complete.
Long before thread_function() completes, our main thread has already
called pthread_join().  When this occurs our main thread will block
(go to sleep) and wait for thread_function() to complete.  When
thread_function() completes, pthread_join() will return. Now our
program has one main thread again.  When our program exits, all new
threads have been pthread_join()ed.  This is exactly how you should deal with
every new thread you create in your programs.  If a new thread
isn't joined it will still count against your system's maximum thread
limit.  This means that not doing the proper cleanup will eventually
cause new pthread_create() calls to fail.</p><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">Back to top</a></p><p><a name="h5"><span class="atitle">No parents, no children</span></a></p><p>

If you've used the fork() system call you're probably familiar with
the concept of parent and child processes.  When a process creates
another new process, using fork(), the new process is considered the
child and the original process is considered the parent.  This
creates a hierarchical relationship that can be handy, especially when
waiting for child processes to terminate.  The waitpid()
function, for example, will tell the current process to wait for the termination of
any child processes.  waitpid() is used to implement a simple cleanup
routine in your parent process.</p><p>Things are a little more interesting with POSIX threads.  You may
have noticed that I have intentionally avoided using the terms "parent
thread" and "child thread" so far.  That's because
with POSIX threads this hierarchical relationship doesn't exist.  While
a main thread may create a new thread, and that new thread may create
an additional new thread, the POSIX threads standard views all your
threads as a single pool of equals. So the concept of
waiting for a child thread to exit doesn't make sense. The POSIX
threads standard does not record any "family" information.  This lack of
genealogy has one major implication: if you want to wait for a thread
to terminate, you need to specify which one you are waiting for by
passing the proper tid to pthread_join().  The threads library can't
figure it out for you.</p><p>To many people this isn't very good news because it can complicate
programs that consist of more than two threads.  Don't let it worry
you.  The POSIX threads standard provides all the tools you need to
manage multiple threads gracefully.  Actually, the fact that there is no
parent/child relationship opens up some creative ways to use threads
in our programs.  For example, if we have a thread called thread 1,
and thread 1 creates a thread called thread 2, it's not necessary for
thread 1 itself to call pthread_join() for thread 2. Any other
thread in the program can do that.  This allows for
interesting possibilities when you write heavily multithreaded code.
You can, for example, create a global "dead list" that contains all
stopped threads and then have a special cleanup thread that simply
waits for an item to be added to the list. The cleanup thread calls pthread_join()
to merge it with itself.  Now your entire cleanup will be handled neatly
and efficiently in a single thread.</p><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">Back to top</a></p><p><a name="h6"><span class="atitle">Synchronized swimming</span></a></p><p>

Now it's time to take a look at some code that does something a little
unexpected.  Here's thread2.c:</p><br /><a name="listing2"><b>thread2.c</b></a><br /><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">

#include &lt;pthread.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;

int myglobal;

 void *thread_function(void *arg) {
  int i,j;
  for ( i=0; i&lt;20; i++ ) {
    j=myglobal;
    j=j+1;
    printf(".");
    fflush(stdout);
   sleep(1);
    myglobal=j;
  }
  return NULL;
}

int main(void) {

  pthread_t mythread;
  int i;

  if ( pthread_create( &amp;mythread, NULL, thread_function, NULL) ) {
    printf("error creating thread.");
    abort();
  }

  for ( i=0; i&lt;20; i++) {
    myglobal=myglobal+1;
    printf("o");
    fflush(stdout);
    sleep(1);
  }

  if ( pthread_join ( mythread, NULL ) ) {
    printf("error joining thread.");
    abort();
  }

  printf("\nmyglobal equals %d\n",myglobal);

  exit(0);

}
</pre></td></tr></table><br /><div class="ibm-alternate-rule"><hr/></div><p class="ibm-ind-link ibm-back-to-top"><a href="#ibm-pcon" class="ibm-anchor-up-link">Back to top</a></p><p><a name="h7"><span class="atitle">Understanding thread2.c</span></a></p><p>

This program, like our first one, creates a new thread.  Both
the main thread and the new thread then increment a global variable called
myglobal 20 times.  But the program itself produces some unexpected results.
Compile it by typing:</p><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">
$ gcc thread2.c -o thread2 -lpthread
</pre></td></tr></table><br /><p>
And run it:
</p><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">
$ ./thread2
</pre></td></tr></table><br /><p>
Here's some output from my system:
</p><table width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td class="code-outline"><pre class="displaycode">
$ ./thread2
..o.o.o.o.oo.o.o.o.o.o.o.o.o.o..o.o.o.o.o
myglobal equals 21
</pre></td></tr></table><br /><p>Quite unexpected!  Since myglobal starts at zero, and both the main
thread and the new thread each increment it by 20, we should see
myglobal equaling 40 at the end of the program.  Since myglobal equals
21, we know that something fishy is going on here. But what is it?</p><p>Give up?  OK, I'll show you why it happens.  Take a look at
thread_function().  Notice how we copy myglobal into a local variable
called "j"?  And see how we increment j, then sleep for one second,
and only then copy our new j value into myglobal?  That's the key.
Imagine what happens if our main thread increments myglobal just
<b>after</b> our new thread copies the value of myglobal into j.  When
thread_function() writes the value of j back to myglobal, it will overwrite
the modification that our main thread made.</p><p>When writing threaded programs, you want to avoid useless side effects like the one we just looked at because
they're a waste of time (except when you are writing articles on POSIX threads, of
course :).  Now, what can we do to eliminate this hassle?</p><p>Since the problem occurs because we copy myglobal to j and hold it
there for one second before writing it back, we could try to avoid using a temporary local variable and incrementing
myglobal directly.  While this solution will probably work in this
particular example, it is not correct. And if we were performing a
relatively complex mathematical operation on myglobal instead of just
incrementing it, it would certainly fail. But why?</p><p>To understand the problem, you need to remember that threads run
simultaneously.  Even on a uniprocessor machine (where the kernel
uses time slicing to simulate true multitasking) we can, from a
programmer's perspective, imagine both threads as executing at
the same time.  thread2.c has problems because the code in
thread_function() relies on the fact that myglobal will not be
modified during the ~1 second before it is incremented.  We need some
way for one thread to tell the other to "hold off" while it's making
changes to myglobal.  I'll show you exactly how to do this in
my next article.  See you then.</p><!-- CMA ID: 11023 --> <!-- Site ID: 1 --><!--XSLT stylesheet used to transform this file: dw-document-html-6.0.xsl-->
<br />
<p><a name="resources"><span class="atitle">Resources</span></a></p><ul><li>See documentation on <a href="http://metalab.unc.edu/pub/Linux/docs/faqs/Threads-FAQ/html/">Linux threads</a>, by Sean Walton, KB7rfa
<br /><br /></li><li>Take a POSIX threads <a href="http://www.math.arizona.edu/swig/pthreads/threads.html">tutorial</a> by Mark Hays at the University of Arizona
<br /><br /></li><li>In <a href="http://hwaci.com/sw/pttcl/pttcl.html">An Introduction to Pthreads-Tcl</a>, see changes to Tcl that enable it to be used with POSIX threads
<br /><br /></li><li>Take another tutorial, <a href="http://centaurus.cs.umass.edu/~wagner/threads_html/tutorial.html">Getting Started with POSIX Threads</a>, by Tom Wagner and Don Towsley in the Computer Science Department at the University of Massachusetts, Amherst
<br /><br /></li><li>Always go to your friendly Linux pthread man pages ("man -k pthread")<br /><br /></li><li><a href="http://www.cs.fsu.edu/~mueller/pthreads/">FSU PThreads</a> is a C library that implements POSIX threads for SunOS 4.1.x, Solaris 2.x, SCO UNIX, FreeBSD, Linux, and DOS
<br /><br /></li><li>Refer to the home page for <a href="http://members.aa.net/~mtp/PCthreads.html">POSIX and DCE threads for Linux</a><br /><br /></li><li>See <a href="http://pauillac.inria.fr/~xleroy/linuxthreads/">The LinuxThreads Library</a><br /><br /></li><li><a href="http://www.users.itl.net.ua/~prool/proolix.html">Proolix</a> is a simple POSIX-compliant operating system for i8086+ under permanent development
<br /><br /></li><li>Take a look at David R. Butenhof's book <a href="http://www.amazon.com/exec/obidos/ASIN/0201633922/o/qid=961544788/sr=8-1/ref=aps_sr_b_1_1/002-2882413-1227240">Programming
with POSIX Threads</a>, in which he covers, among other things, the possible permutations of not using mutexes<br /><br /></li><li>Check out W. Richard Stevens' book <a href="http://search.borders.com/fcgi-bin/db2www/search/search.d2w/Details?&amp;mediaType=Book&amp;prodID=2362607">UNIX Network Programming: Network APIs: Sockets and XTI, Volume 1</a><br /><br /></li></ul>
<p><a name="author"><span class="atitle">About the author</span></a></p><div class="ibm-container ibm-portrait-module ibm-alternate-two"><div class="ibm-container-body"><p><a name="author1"></a>Daniel Robbins lives in Albuquerque, New Mexico. He is the President/CEO of Gentoo Technologies, Inc., the Chief Architect of the Gentoo Project and a contributing author to several books published by MacMillan: <i>Caldera OpenLinux Unleashed</i>, <i>SuSE Linux Unleashed</i>, and <i>Samba  Unleashed</i>.  Daniel has been involved with computers in some fashion since the second grade, when he was first exposed to the Logo Programming language as well as a potentially dangerous dose of Pac-Man.  This probably explains why he has since served as a Lead
Graphic Artist at SONY Electronic Publishing/Psygnosis. Daniel enjoys spending time with his wife Mary, and his new baby daughter Hadassah. You can contact Daniel Robbins at <a href="mailto:drobbins@gentoo.org">drobbins@gentoo.org</a>.</p></div></div>
<!-- MAIN_COLUMN_CONTENT_END -->

<!-- INLINE_COMMENTS_START -->
<p class="ibm-no-print"><span class="atitle"><a name="icomments">Comments</a></span></p>
<div id="dw-icomments-container" class="ibm-no-print">
<div class="ibm-alternate-rule"><hr /></div>
<div class="ibm-alternate-rule"><hr /></div>
<!-- Comment_Script -->
<a id="comments" href="comments"></a>
<script language="JavaScript" src="//dw1.s81c.com/developerworks/js/insertcomment.js" type="text/javascript">//</script>
<div id="threadShow"></div>
<script language="JavaScript" type="text/javascript">
// <![CDATA[
 jQuery('threadShow').insertComment('95%',5,'nCmts','icomments');
// ]]>
</script>
</div>
<!-- INLINE_COMMENTS_END -->

<p class="ibm-ind-link ibm-back-to-top"><a class="ibm-anchor-up-link" href="#ibm-pcon">Back to top</a></p>
<p><a href="http://www.ibm.com/developerworks/ibm/trademarks/">Trademarks</a> &nbsp;|&nbsp; <a href="https://www.ibm.com/developerworks/mydeveloperworks/terms/">My developerWorks terms and conditions</a></p>

<!-- Overlays -->
<!-- Zone/Leaf_Interest_Overlay_Start -->
<div class="ibm-common-overlay ibm-no-print" id="dwmyinterestadd">
<div class="ibm-head"><p><a class="ibm-common-overlay-close" href="#close">Close [x]</a></p></div>
<div class="ibm-body">
<div class="ibm-main">
<a class="ibm-access" name="dwmyinterestaddhelp">Help: Update or add to My dW interests</a>   
<div class="ibm-title"><h1>What's this?</h1></div>
<div class="ibm-container ibm-alternate">
<p>This little timesaver lets you update your My developerWorks profile with just one click!  The general subject of this content (AIX and UNIX, Information Management, Lotus, Rational, Tivoli, WebSphere, Java, Linux, Open source, SOA and Web services, Web development, or XML) will be added to the interests section of your profile, if it's not there already.  You only need to be logged in to My developerWorks.</p>
<p>And what's the point of adding your interests to your profile?  That's how you find other users with the same interests as yours, and see what they're reading and contributing to the community.  Your interests also help us recommend relevant developerWorks content to you.</p>
<p><a href="https://www.ibm.com/developerworks/mydeveloperworks/profiles/home.do?lang=en">View your My developerWorks profile</a></p>
<p class="ibm-access"><a href="#interestShow">Return from help</a></p>
</div> 
</div>
</div>
<div class="ibm-footer"></div>
</div>

<div class="ibm-common-overlay ibm-no-print" id="dwmyinterestremove">
<div class="ibm-head"><p><a class="ibm-common-overlay-close" href="#close">Close [x]</a></p></div>
<div class="ibm-body">
<div class="ibm-main">
<a class="ibm-access" name="dwmyinterestremovehelp">Help: Remove from My dW interests</a> 
<div class="ibm-title"><h1>What's this?</h1></div>
<div class="ibm-container ibm-alternate">
<p>Removing this interest does not alter your profile, but rather removes this piece of content from a list of all content for which you've indicated interest.  In a future enhancement to My developerWorks, you'll be able to see a record of that content.</p>
<p><a href="https://www.ibm.com/developerworks/mydeveloperworks/profiles/home.do?lang=en">View your My developerWorks profile</a></p>
<p class="ibm-access"><a href="#interestShow">Return from help</a></p>
</div> 
</div>
</div>
<div class="ibm-footer"></div>
</div>
<!-- Zone/Leaf_Interest_Overlay_End --></div>
<!-- MAIN_COLUMN_CONTAINER_END -->

<!-- Rating_Meta_BEGIN -->
<!--Rating_Meta_BEGIN--><div class="metavalue">static.content.url=http://www.ibm.com/developerworks/js/artrating/</div><div class="metavalue">SITE_ID=1</div><div class="metavalue">Zone=Linux</div><div class="metavalue">ArticleID=11023</div><div class="metavalue">ArticleTitle=POSIX threads explained</div><div class="metavalue">publish-date=07012000</div><div class="metavalue">author1-email=drobbins@gentoo.org</div><div class="metavalue">author1-email-cc=</div><script language="javascript" type="text/javascript">document.write('<div class="metavalue">url='+location.href.replace('<', '%3C')+'</div>');</script><!--Rating_Meta_END-->
<!-- Rating_Meta_END -->

</div>
<!-- MAIN_COLUMN_END-->

<!-- RIGHT_COLUMN_BEGIN -->
<div id="ibm-content-sidebar">
<div id="ibm-social-tools-sidebar" class="ibm-share-this"></div>

<!-- RIGHT_COLUMN_CONTENT_BEGIN --> 
<div class="ibm-container"><h2>Table of contents</h2><div class="ibm-container-body"><img alt="" height="1" width="1" src="//www.ibm.com/i/c.gif"/><ul class="ibm-bullet-list"><li><a class="ibm-feature-link" href="#h0">Threads are fun</a></li><li><a class="ibm-feature-link" href="#h1">Threads are nimble</a></li><li><a class="ibm-feature-link" href="#h2">I think I'm a clone now</a></li><li><a class="ibm-feature-link" href="#h3">Beginning threads</a></li><li><a class="ibm-feature-link" href="#h4">Understanding thread1.c</a></li><li><a class="ibm-feature-link" href="#h5">No parents, no children</a></li><li><a class="ibm-feature-link" href="#h6">Synchronized swimming</a></li><li><a class="ibm-feature-link" href="#h7">Understanding thread2.c</a></li><li><a class="ibm-feature-link" href="#resources">Resources</a></li><li><a class="ibm-feature-link" href="#author">About the author</a></li><li><a class="ibm-feature-link" href="#icomments">Comments</a></li></ul></div></div>
<!--XSLT stylesheet used to transform this content: s-danube.xsl--><div class="ibm-container"><h2>Local resources</h2><div class="ibm-container-body"><img src="//www.ibm.com/developerworks/i/spot-danube.jpg" alt="" border="0" height="58" width="188"/><ul class="ibm-bullet-list"><li><a href="http://www.ibm.com/partnerworld/iic/europe/hursley.htm?S_TACT=105AGY81&amp;S_CMP=danube_gb_eu" class="ibm-feature-link">IBM Innovation Center -  United Kingdom: Hursley  </a></li><li><a href="http://www.ibm.com/partnerworld/iic/southbank.html?S_TACT=105AGY81&amp;S_CMP=danube_gb_eu" class="ibm-feature-link">IBM Innovation Center -  United Kingdom: South Bank  </a></li><li><a href="http://www.ibm.com/developerworks/views/global/techbriefing.jsp?end_no=100&amp;lcl_sort_order=desc&amp;sort_order=asc&amp;expand=Europe%2C+Middle+East%2C+Africa&amp;show_all=false&amp;start_no=1&amp;geo_by=All+Geographies&amp;sort_by=Date&amp;search_by=&amp;topic_by=All+Topics&amp;show_abstract=true?S_TACT=105AGY81&amp;S_CMP=danube_gb_eu" class="ibm-feature-link">Technical Briefings in Europe, Middle East and Africa</a></li></ul></div></div>
<!--XSLT stylesheet used to transform this content: s-community.xsl--><div class="ibm-container"><h2>My developerWorks community</h2><div class="ibm-container-body"><p>Interact, share, and communicate with developers worldwide.</p><div class="ibm-rule"><hr/></div><ul class="ibm-bullet-list"><li><a href="https://www.ibm.com/developerworks/mydeveloperworks/homepage/web/getuserpref?ca=dma-" class="ibm-feature-link">My Home</a></li><li><a href="https://www.ibm.com/developerworks/mydeveloperworks/profiles/home.do?lang=en&amp;ca=dma-" class="ibm-feature-link">Profiles</a></li><li><a href="https://www.ibm.com/developerworks/mydeveloperworks/groups/service/html/allcommunities?ca=dma-" class="ibm-feature-link">Groups</a></li><li><a href="https://www.ibm.com/developerworks/mydeveloperworks/blogs/?ca=dma-" class="ibm-feature-link">Blogs</a></li><li><a href="https://www.ibm.com/developerworks/mydeveloperworks/bookmarks/?ca=dma-" class="ibm-feature-link">Bookmarks</a></li><li><a href="https://www.ibm.com/developerworks/mydeveloperworks/activities/service/html/mainpage?ca=dma-" class="ibm-feature-link">Activities</a></li><li><a href="http://www.ibm.com/developerworks/spaces/?ca=dma-" class="ibm-feature-link">Spaces</a></li><li><a href="http://www.ibm.com/developerworks/forums/index.html?ca=dma-" class="ibm-feature-link">Forums</a></li><li><a href="http://www.ibm.com/developerworks/wikis/dashboard.action?ca=dma-" class="ibm-feature-link">Wikis</a></li><li><a href="http://www.ibm.com/developerworks/podcast/?ca=dma-" class="ibm-feature-link">Podcasts</a></li><li><a href="http://www.ibm.com/developerworks/exchange/dw_index.jspa?ca=dma-" class="ibm-feature-link">Exchange</a></li></ul><div class="ibm-rule"><hr/></div><p class="ibm-ind-link"><a href="https://www.ibm.com/developerworks/mydeveloperworks/?ca=dma-" class="ibm-forward-link">My developerWorks overview</a></p></div></div>
<!-- Tagging_Start -->
<div id="dw-tag-cloud-container" class="ibm-container dw-hidetag"><h2>Tags</h2>
<div id="dw-tag-help"><a class="dwauthor" rel="#tagtip" id="dwtagtip"><img alt="Help" height="16" width="16" align="top" src="//dw1.s81c.com/developerworks/i/help_icon.gif"/></a></div>
<div id="tagtip" class="dwauthor-onload-state ibm-no-print">Use the <strong>search field</strong> to find all types of content in My developerWorks with that tag.<p>Use the <strong>slider bar</strong> to see more or fewer tags.</p><p>For articles in technology zones (such as Java technology, Linux, Open source, XML), <strong>Popular tags</strong> shows the top tags 
for <em>all technology zones</em>.  For articles in product zones (such as Info Mgmt, Rational, WebSphere), <strong>Popular tags</strong> shows the top tags for <em>just that product zone</em>.</p><p>For articles in technology zones (such as Java technology, Linux, Open source, XML), <strong>My tags</strong> shows your tags for <em>all technology zones</em>.  For articles in product zones (such as Info Mgmt, Rational, WebSphere), <strong>My tags</strong> shows your tags for <em>just that product zone</em>.</p></div>
<div class="ibm-access">Use the search field to find all types of content in My developerWorks with that tag.  <em>Popular tags</em> shows the top tags for this particular content zone (for example, Java technology, Linux, WebSphere).  <em>My tags</em> shows your tags for this particular content zone (for example, Java technology, Linux, WebSphere).</div>
<div class="ibm-container-body">
<div class="dw-tag-search"><form action="//www.ibm.com/developerworks/mydeveloperworks/bookmarks/html?lang=en" method="get" id="actualtagform" onsubmit="popupform(this, 'join')">
<p><label for="tagfield"><strong>Search all tags</strong></label><input id="tagfield" name="tag" type="text" maxlength="20" size="17" />&nbsp;<input src="//dw1.s81c.com/i/v16/buttons/short-btn.gif" type="image" class="ibm-btn-view" alt="submit search" title="submit search" value="Search" /></p></form></div>
<div class="ibm-rule"><hr/></div>
<div id="dw-tag-select">
<div id="dw-tag-select-popular"><p><strong>Popular article tags</strong>&nbsp;|&nbsp;<br /><a id="a-my" href="javascript:;">My article tags</a><a href="#dw-tag-access" class="ibm-access">Skip to tags list</a></p></div>
<div id="dw-tag-select-my" class="dw-hidetag"><p><a id="a-popular" href="javascript:;">Popular article tags</a>&nbsp;|&nbsp;<br /><strong>My article tags</strong></p><a href="#dw-tag-access" class="ibm-access">Skip to tags list</a></div>
<div id="dw-tag-cloud"></div>  
</div>   
</div>
</div>
<!-- Tagging_End -->
<!-- Dig_Deeper -->
<div class="ibm-container"><h2>Dig deeper into Linux on developerWorks</h2><div class="ibm-container-body"><ul class="ibm-link-list"><li class="ibm-first"><a href="http://www.ibm.com/developerworks/linux/" class="ibm-forward-link">Overview</a></li><li><a href="http://www.ibm.com/developerworks/linux/newto/" class="ibm-forward-link">New to Linux</a></li><li><a href="http://www.ibm.com/developerworks/views/linux/downloads.jsp" class="ibm-forward-link">Downloads and products</a></li><li><a href="http://www.ibm.com/developerworks/views/linux/projects.jsp" class="ibm-forward-link">Open source projects</a></li><li><a href="http://www.ibm.com/developerworks/views/linux/library.jsp" class="ibm-forward-link">Technical library (articles, tutorials, training, and more)</a></li><li><a href="http://www.ibm.com/developerworks/forums/dw_lforums.jsp" class="ibm-forward-link">Forums</a></li><li><a href="http://www.ibm.com/developerworks/views/linux/events.jsp" class="ibm-forward-link">Events</a></li><li><a href="http://www.ibm.com/developerworks/newsletter/" class="ibm-forward-link">Newsletter</a></li></ul></div></div>
<!-- High_Visibility_Offer -->
<!--XSLT stylesheet used to transform this content: s-highvisibilityoffer.xsl--><div class="ibm-container"><h2>The ultimate agile development solution</h2><div class="ibm-container-body"><img width="188" height="70" border="0" alt="Rational Team Concert Exp-C" src="//www.ibm.com/developerworks/i/hivis-w-etcec.jpg"/><p class="ibm-ind-link"><a href="http://www.ibm.com/developerworks/downloads/r/rtcexpressc/learn.html?ca=dti-ratcexpc" class="ibm-forward-link">Free for up to 10 developers - Rational Team Concert Express-C</a></p></div></div>
<!-- Special_Offers -->
<div class="ibm-container"><h2>Special offers</h2><div class="ibm-container-body"><p class="dw-special-offers"><a href="http://www.ibm.com/developerworks/offers/lp/demos/?ca=dti-dwdemos"><img src="//www.ibm.com/developerworks/i/tile_v16_ondemanddemos.gif" width="158" height="50" border="0" alt="On demand demos: An easy way to watch and learn" /></a></p><p class="dw-special-offers"><a href="http://www.ibm.com/developerworks/rational/kits/tester/?ca=dti-rattstrekit"><img src="//www.ibm.com/developerworks/i/tile_v16_testing.gif" width="158" height="50" border="0" alt="Rational tester eKit for building quality testing apps" /></a></p><p class="dw-special-offers"><a href="http://www.ibm.com/developerworks/downloads/im/cognosbi/learn.html?ca=dti-imcognosBItrial"><img src="//www.ibm.com/developerworks/i/tile_v16_cognos8bi.gif" width="158" height="50" border="0" alt="Try Cognos 8 Business Intelligence" /></a></p><div class="ibm-rule"><hr/></div><p class="ibm-ind-link"><a class="ibm-forward-link" href="http://www.ibm.com/developerworks/downloads/?ca=dti-tilemoreoffers">Trial software offers</a></p></div></div>
<!-- RIGHT_COLUMN_CONTENT_END -->

</div>
<!-- RIGHT_COLUMN_END -->

<!-- CONTENT_BODY_END -->
</div>

</div>
<!-- CONTENT_END -->

 <!-- END_IBM-PCON -->
</div>

<!-- FOOTER_BEGIN -->
<div id="ibm-page-tools">
<!-- IBM page tools container -->
</div>
<div id="ibm-footer">
<ul>
<li class="ibm-first"><a href="http://www.ibm.com/ibm/">About IBM</a></li>
<li><a href="http://www.ibm.com/privacy/">Privacy</a></li>
<li><a href="http://www.ibm.com/contact/">Contact</a></li>
<li><a href="http://www.ibm.com/legal/">Terms of use</a></li>
</ul>
</div>
<!-- FOOTER_END -->

 <!-- END_IBM-TOP -->
</div>
 
 <!-- SCRIPTS_INCLUDE_BEGIN -->
<!-- JQuery start -->
<script type="text/javascript" language="JavaScript" src="//dw1.s81c.com/developerworks/js/jquery/cluetip98/jquery.dimensions-1.2.js"></script>
<script type="text/javascript" language="JavaScript" src="//dw1.s81c.com/developerworks/js/jquery/cluetip98/jquery.hoverIntent.minified.js"></script>
<script type="text/javascript" language="JavaScript" src="//dw1.s81c.com/developerworks/js/jquery/cluetip98/jquery.cluetip.js"></script>
<script type="text/javascript" language="JavaScript" src="//dw1.s81c.com/developerworks/js/jquery/tagging/ui.core-1.7.1.js"></script>
<script type="text/javascript" language="JavaScript" src="//dw1.s81c.com/developerworks/js/jquery/tagging/ui.slider-1.7.1.js"></script>
<script type="text/javascript" language="JavaScript" src="//dw1.s81c.com/developerworks/js/jquery/tagging/dwjquerytags.js"></script>
<script type="text/javascript" language="JavaScript">
	jQuery.noConflict();     
	// Put all your code in your document ready area
	jQuery(document).ready(function(jQuery) {
	// Do jQuery stuff using jQuery 
	jQuery('a.dwauthor').cluetip({
		local: true,
		showTitle: false,
		positionBy: 'bottomTop',
		sticky: true,	
		mouseOutClose: true,
		closeText: '<img src="//dw1.s81c.com/developerworks/js/jquery/cluetip98/i/x.gif" alt="Close" />',
		arrows: false,
		dropShadow: true,
		cluetipClass: 'dwbasic'
		});

		//tagging
		login="false";
		userid="";
		whichTags = "init";
		pCont = "";
		mCont = "";
		signInMCont = "";
		accessCont = "";
		pValue = 0;
		mValue = 0;

		rBHash = null;
		rBHash = new Object();
		rBHash['viperLang'] = 'en';
		rBHash['urlLang'] = 'en';
		rBHash['tagThisWinTitle'] = 'Tagit';
		rBHash['pTags1'] = 'Popular tags';
		rBHash['pTags2'] = 'End of Popular tags';
		rBHash['mTags1'] = 'My tags';
		rBHash['mTags2'] = 'End of My tags';
		rBHash['alt1'] = 'Loading Content';
		rBHash['noATags'] = 'No active tags';
		rBHash['signIn1'] = 'Please ';
		rBHash['signIn2'] = 'sign in';
		rBHash['signIn3'] = ' to access';
		rBHash['signIn4'] = 'My Tags';
		rBHash['signIn5'] = 'To access My Tags, please ';
		rBHash['signIn6'] = 'sign in';
		rBHash['signIn7'] = 'Read Popular tags';

		zoneHash = new Object();
		zoneHash['aix'] = 'AIX and UNIX zone';
		zoneHash['data'] = 'Information Management zone';
		zoneHash['lotus'] = 'Lotus zone';
		zoneHash['rational'] = 'Rational zone';
		zoneHash['tivoli'] = 'Tivoli zone';
		zoneHash['websphere'] = 'WebSphere zone';
		zoneHash['architecture'] = 'Technical library';
		zoneHash['autonomic'] = 'Technical library';
		zoneHash['java'] = 'Technical library';
		zoneHash['cloud'] = 'Technical library';
		zoneHash['industry'] = 'Technical library';
		zoneHash['library'] = 'Technical library';
		zoneHash['linux'] = 'Technical library';
		zoneHash['opensource'] = 'Technical library';
		zoneHash['power'] = 'Technical library';
		zoneHash['webservices'] = 'Technical library';
		zoneHash['web'] = 'Technical library';
		zoneHash['xml'] = 'Technical library';
		zoneHash['wireless'] = 'Technical library';
		jQuery.checkRB();
		jQuery.getPopularTags("/developerworks/dwtags/dwjquerytabtags?lang=" + rBHash['viperLang'] + "&base=" + jQuery.getNormalizedZoneUrl(location.href));
		jQuery.getUserTags();
		if(jQuery.isTutorial(location.href) == "true") {
			jQuery.getTagsForContent("/developerworks/tagging/UseCaseServlet?lang=" + rBHash['viperLang'] + "&format=maverick&cType=tutorials&use_case=geturltags&action=gettags&url=" + jQuery.normalizeUrl(location.href));
		}
		else {
			jQuery.getTagsForContent("/developerworks/tagging/UseCaseServlet?lang=" + rBHash['viperLang'] + "&format=maverick&cType=articles&use_case=geturltags&action=gettags&url=" + jQuery.normalizeUrl(location.href));

		}
	});
 </script>
 <!-- JQuery end -->
 <!-- Overlay js -->
<script language="JavaScript" src="//dw1.s81c.com/common/js/overlay.js" type="text/javascript"></script>
<!-- My dW Interest article -->
<script language="JavaScript" src="//dw1.s81c.com/developerworks/js/showinterest.js" type="text/javascript">//</script>
<script language="JavaScript" type="text/javascript">
        // <![CDATA[
			var contentId = '';
			var contentAreas = '';
			var caArr = [];
			contentId = '11023';
			contentAreas = 'linux';
			if(contentAreas != ''){caArr = contentAreas.split(',');}
			var loginLink = 'https://www.ibm.com/developerworks/dwwi/DWAuthRouter?m=loginpage&d=' + encodeURIComponent(window.location);jQuery('interestShow').showInterest(contentId,'dw-article',{'int_tops':[16,87],'int_prods':[], 'int_prod_fam':[],'int_cont_area':caArr},
'<div id="dw-interest-anon"><a id="intAnonBtn" class="ibm-external-link" href="">Update My dW interests</a> (<a class="dw-interest" href="' + loginLink + '">Log in</a> | <a class="dw-interest" href="#overlay" onclick="ibmCommon.Overlays.show(\'dwmyinterestadd\', this);return false;">What\'s this?</a>) <a class="ibm-access" href="#dwmyinterestaddhelp">Skip to help for Update My dW interests</a></div>',
'<div id="dw-interest-add"><a id="intSelectBtn" class="ibm-external-link" href="">Add to My dW interests</a> (<a class="dw-interest" href="#overlay" onclick="ibmCommon.Overlays.show(\'dwmyinterestadd\', this);return false;">What\'s this?</a>) <a class="ibm-access" href="#dwmyinterestaddhelp">Skip to help for Add to My dW interests</a></div>',
'<div id="dw-interest-remove">Added to My dW interests (<a class="dw-interest" href="https://www.ibm.com/developerworks/mydeveloperworks/profiles/html/myProfileView.do?lang=en">Edit</a>)</div>'
);
// ]]>
</script>
<!-- BEGIN: Use this section to set page specific variables for the Unica Page Tag -->
<script language="JavaScript">var NTPT_PGEXTRA="ibmSkillLevel=4&ibmAdoptPhase=-&ibmRole=-";</script>
<!--END --><!-- SCRIPTS_INCLUDE_END -->

<div id="ibm-metrics">
<script src="//dw1.s81c.com/common/stats/stats.js" type="text/javascript">//</script>
</div>

</body>
</html>